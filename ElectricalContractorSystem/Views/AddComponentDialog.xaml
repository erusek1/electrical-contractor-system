<Window x:Class="ElectricalContractorSystem.Views.AddComponentDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Add Component" 
        Height="400" Width="600"
        WindowStartupLocation="CenterOwner"
        WindowStyle="ToolWindow"
        ResizeMode="NoResize">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <TextBlock Text="Add Component to Assembly" 
                   FontSize="18" 
                   FontWeight="Bold" 
                   Margin="0,0,0,20"/>
        
        <!-- Search -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Label Content="Search:" VerticalAlignment="Center"/>
            <TextBox Grid.Column="1" 
                     x:Name="SearchTextBox"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                     Margin="5,0,0,0"/>
        </Grid>
        
        <!-- Price List Items -->
        <DataGrid Grid.Row="2" 
                  ItemsSource="{Binding FilteredPriceListItems}"
                  SelectedItem="{Binding SelectedItem}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  SelectionMode="Single"
                  MouseDoubleClick="DataGrid_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Code" 
                                    Binding="{Binding ItemCode}" 
                                    Width="80"/>
                <DataGridTextColumn Header="Name" 
                                    Binding="{Binding Name}" 
                                    Width="*"/>
                <DataGridTextColumn Header="Category" 
                                    Binding="{Binding Category}" 
                                    Width="120"/>
                <DataGridTextColumn Header="Price" 
                                    Binding="{Binding BaseCost, StringFormat=C}" 
                                    Width="80"/>
            </DataGrid.Columns>
        </DataGrid>
        
        <!-- Quantity -->
        <Grid Grid.Row="3" Margin="0,10,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Label Content="Quantity:" VerticalAlignment="Center"/>
            <TextBox Grid.Column="1" 
                     Text="{Binding Quantity, UpdateSourceTrigger=PropertyChanged}"
                     Margin="5,0,0,0"
                     VerticalAlignment="Center"/>
        </Grid>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="4" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,20,0,0">
            <Button Content="Add" 
                    Width="100" 
                    Height="30" 
                    Margin="5"
                    IsDefault="True"
                    IsEnabled="{Binding CanAdd}"
                    Click="AddButton_Click"/>
            <Button Content="Cancel" 
                    Width="100" 
                    Height="30" 
                    Margin="5"
                    IsCancel="True"
                    Click="CancelButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
